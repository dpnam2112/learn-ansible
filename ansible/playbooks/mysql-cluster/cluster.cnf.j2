# Managed by Ansible (cluster.cnf)
# PXC / Galera essentials
[mysqld]
wsrep_on = ON
default_storage_engine = InnoDB
innodb_autoinc_lock_mode = 2

# Galera provider & identity
wsrep_provider = {{ pxc_wsrep_provider }}
wsrep_cluster_name = {{ pxc_cluster_name }}
wsrep_cluster_address = {{ pxc_gcomm }}
wsrep_node_name = {{ inventory_hostname }}
wsrep_node_address = {{ hostvars[inventory_hostname].ansible_host }}

wsrep_sst_method = xtrabackup-v2

{% if pxc_secondary_readonly and (inventory_hostname in groups.get('mysql-cluster-sec', [])) -%}
# Make secondaries read-only for a single-primary topology
read_only = ON
super_read_only = ON
{% endif -%}

pxc_encrypt_cluster_traffic = OFF
